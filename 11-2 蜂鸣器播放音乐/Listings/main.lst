C51 COMPILER V9.54   MAIN                                                                  11/29/2025 11:04:52 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <STC89C5xRC.H>
   2          #include "Delay.h"
   3          #include "Timer0.h"
   4          
   5          sbit buzzer = P2^5;
   6          
   7          #define P 0 // 休止符
   8          // 低音
   9          #define L1 1
  10          #define L2 2
  11          #define L3 3
  12          #define L4 4
  13          #define L5 5
  14          #define L6 6
  15          #define L7 7
  16          // 中音
  17          #define M1 8
  18          #define M2 9
  19          #define M3 10
  20          #define M4 11
  21          #define M5 12
  22          #define M6 13
  23          #define M7 14
  24          // 高音
  25          #define H1 15
  26          #define H2 16
  27          #define H3 17
  28          #define H4 18
  29          #define H5 19
  30          #define H6 20
  31          #define H7 21
  32          
  33          #define SPEED 500
  34          
  35          unsigned int FreqTable[] = {
  36                  0,
  37              // 低音区 (Low Octave)
  38              63628,  // 低音 1 (C)
  39              63835,  // 低音 2 (D)
  40              64021,  // 低音 3 (E)
  41              64103,  // 低音 4 (F)
  42              64260,  // 低音 5 (G)
  43              64400,  // 低音 6 (A)
  44              64524,  // 低音 7 (B)
  45              
  46              // 中音区 (Middle Octave)
  47              64580,  // 中音 1 (C)
  48              64671,  // 中音 2 (D)
  49              64777,  // 中音 3 (E)
  50              64820,  // 中音 4 (F)
  51              64898,  // 中音 5 (G)
  52              64968,  // 中音 6 (A)
  53              65030,  // 中音 7 (B)
  54              
C51 COMPILER V9.54   MAIN                                                                  11/29/2025 11:04:52 PAGE 2   

  55              // 高音区 (High Octave)
  56              65058,  // 高音 1 (C)
  57              65110,  // 高音 2 (D)
  58              65157,  // 高音 3 (E)
  59              65178,  // 高音 4 (F)
  60              65217,  // 高音 5 (G)
  61              65252,  // 高音 6 (A)
  62              65283   // 高音 7 (B)
  63          };
  64          
  65          unsigned char Music[] = {
  66                  M1, 4,
  67                  M1, 4,
  68                  M5, 4,
  69                  M5, 4,
  70                  M6, 4,
  71                  M6, 4,
  72                  M5, 8,
  73                  M4, 4,
  74                  M4, 4,
  75                  M3, 4,
  76                  M3, 4,
  77                  M2, 4,
  78                  M2, 4,
  79                  M1,     8,
  80                  0xff
  81          };
  82          
  83          unsigned char freqSelect, musicSelect;
  84          
  85          void main()
  86          {
  87   1          Timer0_Init();
  88   1          while(1)
  89   1          {
  90   2                      if(Music[musicSelect] != 0xff)
  91   2                      {
  92   3                              freqSelect = Music[musicSelect];
  93   3                              musicSelect++;
  94   3                              Delayms(SPEED/4 * Music[musicSelect]);
  95   3                              musicSelect++;
  96   3                              TR0 = 0;
  97   3                              Delayms(5);
  98   3                              TR0 = 1;
  99   3                      }
 100   2                      else
 101   2                      {
 102   3                              TR0 = 0;
 103   3                              while(1);
 104   3                      }
 105   2          }
 106   1      }
 107          
 108          void Timer0_Routine()   interrupt 1
 109          {
 110   1              if(FreqTable[freqSelect])
 111   1              {
 112   2                      TH0 = FreqTable[freqSelect] / 256;
 113   2                      TL0 = FreqTable[freqSelect] % 256;
 114   2                      buzzer = !buzzer;
 115   2              }
 116   1      }
C51 COMPILER V9.54   MAIN                                                                  11/29/2025 11:04:52 PAGE 3   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    119    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     75    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
